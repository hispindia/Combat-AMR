{"version":3,"sources":["D2App/components/dynamicComponent/dynamicComponent.jsx","D2App/components/homeComponent/homeComponent.jsx","D2App/App.js"],"names":["DynamicComponent","Component","constructor","props","super","getEvents","orgUnit","startDate","endDate","events","programCount","dECOC","this","state","url","axios","get","then","resp","data","forEach","event","eventData","dataElement","dataValue","eventDate","split","program","dataValues","value","push","length","eventOrgUnit","eventDeCode","deCode","eventCOC","COC","e","console","log","getAntiEvents","orgUnitAnti","startDateAnti","endDateAnti","eventsAnti","programCountAnti","deCOC_anti","deAnti","respAntiB","eventDataAnti","dataElementAnti","dataValueAnti","antiKeys","antiPresent","antiValue","eventDateAnti","eventOrgUnitAnti","eventDeCodeAnti","coc_keys","coc_key_anti","dataJson","loading","pushed","show","buttonVisible","imported","updated","deleted","ignored","conflicts","getdECOC","bind","postDataValues","respanti","listGrid","rows","row","setState","requestOne","requestTwo","requestThree","requestFour","all","spread","responses","match","deCOC_anti_key","catch","errors","item","itemKey","period","join","categoryOptionCombo","itemAnti","dataValueAntiB","itemKeyAnti","dataValueSet","dataJSON","JSON","stringify","headers","dataType","post","response","impCount","importCount","upCount","igCount","delCount","error","importData","componentDidMount","getAntibio","handleChange","id","target","render","className","animation","class","striped","bordered","hover","variant","onClick","displayName","type","onChange","onError","HomeComponet","onSelect","selected","MyApp"],"mappings":"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","file":"static/js/app.4d3992b3.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport * as ReactBootstrap from \"react-bootstrap\";\r\n\r\nclass DynamicComponent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      startDate: \"\",\r\n      endDate: \"\",\r\n      dECOC: {},\r\n      deAnti: {},\r\n      programCount: {},\r\n      dataJson: {},\r\n      loading: true,\r\n      pushed: false,\r\n      show: false,\r\n      buttonVisible: false,\r\n      imported: 0,\r\n      updated: 0,\r\n      deleted: 0,\r\n      ignored: 0,\r\n      conflicts: 0,\r\n      deCOC_anti:{}\r\n    };\r\n    this.getdECOC = this.getdECOC.bind(this);\r\n    this.postDataValues = this.postDataValues.bind(this);\r\n  }\r\n\r\n  getEvents = (orgUnit, startDate, endDate) => {\r\n    var events = [];\r\n    var programCount = {};\r\n    try {\r\n      var dECOC = this.state.dECOC;\r\n\r\n      var url = `../../../api/events.json?paging=false&orgUnit=${orgUnit}&ouMode=DESCENDANTS`;\r\n      if (startDate) url += `&startDate=${startDate}`;\r\n      if (endDate) url += `&endDate=${endDate}`;\r\n      return axios.get(url).then((resp) => {\r\n        resp.data.events.forEach((event) => {\r\n          var eventData = {};\r\n          var dataElement = {};\r\n          var dataValue = {};\r\n          if (event[\"eventDate\"]) {\r\n            eventData.eventDate = event[\"eventDate\"].split(\"T\")[\"0\"];\r\n            eventData.orgUnit = event[\"orgUnit\"];\r\n            eventData.program = event[\"program\"];\r\n            event.dataValues.forEach(\r\n              (dataValue) =>\r\n                (dataElement[dataValue.dataElement] = dataValue.value)\r\n            );\r\n\r\n            if (dataElement[\"SaQe2REkGVw\"])\r\n              dataValue[\"deCode\"] = dataElement[\"SaQe2REkGVw\"];\r\n            if (dataElement[\"mp5MeJ2dFQz\"] && dataElement[\"B7XuDaXPv10\"])\r\n              dataValue[\r\n                \"COC\"\r\n              ] = `${dataElement[\"mp5MeJ2dFQz\"]}, ${dataElement[\"B7XuDaXPv10\"]}`;\r\n\r\n            eventData.dataValues = dataValue;\r\n            events.push(eventData);\r\n          }\r\n        });\r\n\r\n        if (!events.length) return;\r\n        events.forEach((event) => {\r\n          let eventDate = `${event.eventDate.split(\"-\")[\"0\"]}-${\r\n            event.eventDate.split(\"-\")[\"1\"]\r\n          }`;\r\n          let eventOrgUnit = event.orgUnit;\r\n          let eventDeCode = event.dataValues.deCode;\r\n          let eventCOC = event.dataValues.COC;\r\n\r\n          if (\r\n            dECOC[eventDeCode] &&\r\n            dECOC[eventCOC] &&\r\n            eventDate &&\r\n            eventOrgUnit\r\n          ) {\r\n            if (\r\n              !programCount[\r\n                `${eventOrgUnit}:${eventDate}:${dECOC[eventDeCode]}-${dECOC[eventCOC]}`\r\n              ]\r\n            )\r\n              programCount[\r\n                `${eventOrgUnit}:${eventDate}:${dECOC[eventDeCode]}-${dECOC[eventCOC]}`\r\n              ] = 0;\r\n            programCount[\r\n              `${eventOrgUnit}:${eventDate}:${dECOC[eventDeCode]}-${dECOC[eventCOC]}`\r\n            ] += 1;\r\n          }\r\n        });\r\n        return programCount;\r\n      });\r\n    } catch (e) {\r\n      console.log(\"Error in getEvents\");\r\n    }\r\n  };\r\n\r\n  getAntiEvents = (orgUnitAnti, startDateAnti, endDateAnti) => {\r\n    var eventsAnti = [];\r\n    var programCountAnti = {};\r\n    try {\r\n      var deCOC_anti = this.state.deCOC_anti;\r\n      var deAnti = this.state.deAnti;\r\n\r\n      var url = `../../../api/events.json?paging=false&orgUnit=${orgUnitAnti}&ouMode=DESCENDANTS`;\r\n      if (startDateAnti) url += `&startDate=${startDateAnti}`;\r\n      if (endDateAnti) url += `&endDate=${endDateAnti}`;\r\n      return axios.get(url).then((respAntiB) => {\r\n        respAntiB.data.events.forEach((event) => {\r\n          var eventDataAnti = {};\r\n          var dataElementAnti = {};\r\n          var dataValueAnti = {};\r\n          if (event[\"eventDate\"]) {\r\n            eventDataAnti.eventDate = event[\"eventDate\"].split(\"T\")[\"0\"];\r\n            eventDataAnti.orgUnit = event[\"orgUnit\"];\r\n            eventDataAnti.program = event[\"program\"];\r\n            event.dataValues.forEach(\r\n            (dataValue) =>\r\n              (dataElementAnti[dataValue.dataElement] = dataValue.value)\r\n            );\r\n\r\n            if (dataElementAnti[\"SaQe2REkGVw\"])\r\n              dataValueAnti[\"deCode\"] = dataElementAnti[\"SaQe2REkGVw\"]+\"_AW\";\r\n            for (const antiKeys in dataElementAnti) {\r\n              let antiPresent = antiKeys in deAnti;\r\n              console.log(\"ANTIBIOTCSSS ANTIVALUES : \", antiKeys,  \"----\",deAnti)\r\n              if (antiPresent) {\r\n                var antiValue = deAnti[antiKeys];\r\n                // if (antiValue.indexOf(' ') >= 0) {\r\n                //   console.log(\"ANTIVALUES WITH SPACES : \",antiValue)\r\n                //   antiValue = antiValue.split(\" \")[0]; // Ampicillin_Results\r\n                // }\r\n                // else {\r\n                //   console.log(\"ANTIVALUES WITHOUT  SPACES : \",antiValue)\r\n                //   antiValue = antiValue.split(\"_\")[0]; // Ampicillin_Results\r\n                // }\r\n                antiValue = antiValue.split(\"_\")[0];\r\n                antiValue = antiValue + \"-\" + dataElementAnti[antiKeys]; // Ampicillin-Resistant\r\n                if (dataElementAnti[\"mp5MeJ2dFQz\"] && dataElementAnti[\"B7XuDaXPv10\"]) {\r\n                  let coc_key = \"COC_\"+antiValue\r\n                  dataValueAnti[\r\n                    coc_key \r\n                  ] = `${antiValue}, ${dataElementAnti[\"mp5MeJ2dFQz\"]}, ${dataElementAnti[\"B7XuDaXPv10\"]}`+\"_\"+dataElementAnti[\"SaQe2REkGVw\"]+\"_AW\";\r\n                }\r\n                \r\n              }\r\n            }\r\n            eventDataAnti.dataValues = dataValueAnti;\r\n            eventsAnti.push(eventDataAnti);\r\n          }\r\n        });\r\n\r\n        if (!eventsAnti.length) return;\r\n        eventsAnti.forEach((event) => {\r\n          let eventDateAnti = `${event.eventDate.split(\"-\")[\"0\"]}-${\r\n          event.eventDate.split(\"-\")[\"1\"]\r\n          }`;\r\n          let eventOrgUnitAnti = event.orgUnit;\r\n          let eventDeCodeAnti = event.dataValues.deCode;\r\n          // let eventCOCAnti = event.dataValues;\r\n          // console.log(\"ANTI ABA_AW value: \", deCOC_anti[\"ABA_AW\"])\r\n          // console.log(\"ANTI ABA_AW Value COCS\", deCOC_anti[\"Meropenem-Resistant, CSF, OPD\"])\r\n          // console.log(\"ANTI ABA_AW Value COCS\", deCOC_anti[\"Minocycline-Resistant, CSF, OPD\"])\r\n          // console.log(\"ANTI ABA_AW Value COCS\", deCOC_anti[\"Amikacin-Resistant, Abdominal fluid, OPD\"])\r\n          // console.log(\"ANTI ABA_AW Value COCS\", deCOC_anti[\"Imipenem-Susceptible, Abdominal fluid, OPD\"])\r\n\r\n          for (var coc_keys in event.dataValues) {\r\n            let coc_key_anti = \"\"\r\n            if (eventDeCodeAnti != event.dataValues[coc_keys]) {\r\n              coc_key_anti = event.dataValues[coc_keys];\r\n            }\r\n            console.log(\"COC KEYS\", eventDeCodeAnti,\" : \",coc_key_anti)\r\n            if (\r\n            deCOC_anti[eventDeCodeAnti] &&\r\n            deCOC_anti[coc_key_anti] &&\r\n            eventDateAnti &&\r\n            eventOrgUnitAnti\r\n            ) {\r\n              if (\r\n              !programCountAnti[\r\n              `${eventOrgUnitAnti}:${eventDateAnti}:${deCOC_anti[eventDeCodeAnti]}-${deCOC_anti[coc_key_anti]}`\r\n              ]\r\n              )\r\n              programCountAnti[\r\n              `${eventOrgUnitAnti}:${eventDateAnti}:${deCOC_anti[eventDeCodeAnti]}-${deCOC_anti[coc_key_anti]}`\r\n              ] = 0;\r\n              programCountAnti[\r\n              `${eventOrgUnitAnti}:${eventDateAnti}:${deCOC_anti[eventDeCodeAnti]}-${deCOC_anti[coc_key_anti]}`\r\n              ] += 1;\r\n            }\r\n          }\r\n        });\r\n        return programCountAnti;\r\n      });\r\n    } catch (e) {\r\n    console.log(\"Error in getEvents\");\r\n    }\r\n  };\r\n\r\n  async getAntibio() {\r\n    var deAnti = {};\r\n    try {\r\n      axios\r\n        .get(`../../../api/sqlViews/Td7tyBlEqrT/data.json?paging=false`)\r\n        .then((respanti) => {\r\n          respanti.data.listGrid.rows.forEach((row) => {\r\n            if (row[\"2\"]) deAnti[row[\"1\"]] = row[\"2\"];\r\n          });\r\n          this.setState({ deAnti: deAnti });\r\n        });\r\n    } catch (e) {\r\n      console.log(\"Error\");\r\n      this.setState({ loading: false });\r\n    }\r\n  }\r\n\r\n  async getdECOC() {\r\n    var dECOC = {};\r\n    var deCOC_anti = {};\r\n    let api_one = \"../../../api/29/sqlViews/nExolJ6VsR5/data.json?paging=false\"\r\n    let api_two = \"../../../api/29/sqlViews/X0cT1wQvk9M/data.json?paging=false\"\r\n    let api_three = \"../../../api/29/sqlViews/nWUC12EYfQj/data.json?paging=false\"\r\n    let api_four = \"../../../api/29/sqlViews/rwE9Q42RHfg/data.json?paging=false\"\r\n    let requestOne = axios.get(api_one);\r\n    let requestTwo = axios.get(api_two);\r\n    let requestThree = axios.get(api_three);\r\n    let requestFour = axios.get(api_four);\r\n    try {\r\n      axios\r\n        .all([requestOne, requestTwo, requestThree, requestFour])\r\n        .then(axios.spread((...responses) => {\r\n          const responseOne = responses[0]\r\n          const responseTwo = responses[1]\r\n          const responesThree = responses[2]\r\n          const responseFour = responses[3]\r\n          responses.forEach((resp) => {\r\n            resp.data.listGrid.rows.forEach((row) => {\r\n              if (row[\"1\"].match(/- AW/g) == \"- AW\") { \r\n                let deCOC_anti_key = row[\"7\"]+\"_\"+row[\"0\"]\r\n                if (!(row[\"0\"] in deCOC_anti)) deCOC_anti[row[\"0\"]] = row[\"2\"];\r\n                if (!(deCOC_anti_key in deCOC_anti)) {\r\n                  deCOC_anti[deCOC_anti_key] = row[\"6\"];\r\n                }\r\n              }\r\n              else {\r\n                if (row[\"0\"]) dECOC[row[\"0\"]] = row[\"2\"];\r\n                if (row[\"7\"]) dECOC[row[\"7\"]] = row[\"6\"];\r\n              }\r\n            });\r\n          });\r\n          this.setState({ dECOC: dECOC });\r\n          this.setState({ loading: false });\r\n          this.setState({ deCOC_anti: deCOC_anti });\r\n        })).catch(errors => {\r\n          console.log(\"Errors\", errors)\r\n  // react on errors.\r\n})\r\n    } catch (e) {\r\n      console.log(\"Error\", e);\r\n      this.setState({ loading: false });\r\n    }\r\n  }\r\n\r\n  async postDataValues(orgUnit, startDate = \"\", endDate = \"\") {\r\n    this.setState({ loading: true });\r\n    try {\r\n      var programCount = await this.getEvents(orgUnit, startDate, endDate);\r\n\r\n      var dataValues = [];\r\n      for (let item in programCount) {\r\n        var dataValue = {};\r\n        var itemKey = item.split(\":\");\r\n        dataValue.orgUnit = itemKey[\"0\"];\r\n        dataValue.period = itemKey[\"1\"].split(\"-\").join(\"\");\r\n        dataValue.dataElement = itemKey[\"2\"].split(\"-\")[\"0\"];\r\n        dataValue.categoryOptionCombo = itemKey[\"2\"].split(\"-\")[\"1\"];\r\n        dataValue.value = programCount[item];\r\n        dataValues.push(dataValue);\r\n      }\r\n\r\n      console.log(\"DATA Sample Wise : \",programCount);\r\n      var programCountAnti = await this.getAntiEvents(orgUnit, startDate, endDate);\r\n\r\n      for (let itemAnti in programCountAnti) {\r\n        var dataValueAntiB = {};\r\n        var itemKeyAnti = itemAnti.split(\":\");\r\n        dataValueAntiB.orgUnit = itemKeyAnti[\"0\"];\r\n        dataValueAntiB.period = itemKeyAnti[\"1\"].split(\"-\").join(\"\");\r\n        dataValueAntiB.dataElement = itemKeyAnti[\"2\"].split(\"-\")[\"0\"];\r\n        dataValueAntiB.categoryOptionCombo = itemKeyAnti[\"2\"].split(\"-\")[\"1\"];\r\n        dataValueAntiB.value = programCountAnti[itemAnti];\r\n        dataValues.push(dataValueAntiB);\r\n      }\r\n\r\n      console.log(\"Data Antibiotics wise : \",programCountAnti);\r\n\r\n      // PUSHING DATA IN DATA ENTRY\r\n      var dataValueSet = {};\r\n      dataValueSet.dataValues = dataValues;\r\n      var dataJSON = JSON.stringify(dataValueSet);\r\n      console.log(dataValueSet);\r\n      const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        dataType: \"json\",\r\n      };\r\n      axios\r\n        .post(\"../../../api/dataValueSets\", dataJSON, { headers: headers })\r\n        .then((response) => {\r\n          console.log(response);\r\n          var impCount = response.data.importCount.imported;\r\n          var upCount = response.data.importCount.updated;\r\n          var igCount = response.data.importCount.ignored;\r\n          var delCount = response.data.importCount.deleted;\r\n          // var conflictsDetails = response.data.conflicts;\r\n          this.setState({\r\n            imported: impCount,\r\n            deleted: delCount,\r\n            updated: upCount,\r\n            ignored: igCount,\r\n            loading: false,\r\n            // conflicts: conflictsDetails,\r\n          });\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n\r\n    this.setState({ loading: false });\r\n    this.setState({ pushed: true });\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  importData() {\r\n    this.setState({ show: true });\r\n    this.setState({ pushed: false });\r\n    this.setState({ buttonVisible: true });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getdECOC();\r\n    this.getAntibio();\r\n  }\r\n  handleChange(e, id) {\r\n    this.setState({ [id]: e.target.value });\r\n  }\r\n  render() {\r\n    const { startDate, endDate } = this.state;\r\n    const { imported, updated, deleted, ignored } = this.state;\r\n    if (this.state.loading) {\r\n      return (\r\n        <div className=\"pt-4 m-5 pb-5 mh-100 shadow-lg p-3 mb-4 bg-white rounded\">\r\n          <h2 className=\"ml-5\">Tracker Aggregation </h2>\r\n          <ReactBootstrap.Spinner animation=\"border\" />\r\n          <br></br>\r\n          <br></br>\r\n          <span class=\"ml-8\">Loading Data ...</span>\r\n        </div>\r\n      );\r\n    } else {\r\n      if (this.state.pushed) {\r\n        return (\r\n          <div className=\"pt-4 m-5 pb-5 mh-100 shadow-lg p-3 mb-4 bg-white rounded\">\r\n            <h2 className=\"ml-5\">Tracker Aggregation </h2>\r\n            <br></br>\r\n            <br></br>\r\n            <ReactBootstrap.Table striped bordered hover>\r\n              <thead></thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td>Imported</td>\r\n                  <td>Updated</td>\r\n                  <td>Deleted</td>\r\n                  <td>Ignored</td>\r\n                  <td>Conflicts</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>{imported}</td>\r\n                  <td>{updated}</td>\r\n                  <td>{deleted}</td>\r\n                  <td>{ignored}</td>\r\n                  <td>{this.state.conflicts}</td>\r\n                </tr>\r\n              </tbody>\r\n            </ReactBootstrap.Table>\r\n            <br></br>\r\n            <br></br>\r\n            <ReactBootstrap.Alert variant=\"success\">\r\n              Data Pushed Successfully!!\r\n            </ReactBootstrap.Alert>\r\n            <br></br>\r\n            <ReactBootstrap.Button onClick={() => this.importData()}>\r\n              Back\r\n            </ReactBootstrap.Button>\r\n          </div>\r\n        );\r\n      } else {\r\n        if (this.state.show) {\r\n          return (\r\n            <div className=\"pt-4 m-5 pb-5 mh-100 shadow-lg p-3 mb-4 bg-white rounded\">\r\n              <h2 className=\"ml-5\">Tracker Aggregation </h2>\r\n              <div className=\"row\">\r\n                <div className=\"col-sm-2 m-1 ml-5\"> Org Unit:</div>\r\n                <div className=\"col-sm-4 m-1\">\r\n                  {\" \"}\r\n                  <input\r\n                    className=\"form-control\"\r\n                    value={this.props.data.displayName}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-sm-2 m-1 ml-5 \">Start Date:</div>\r\n                <div className=\"col-sm-4 m-1\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={startDate}\r\n                    onChange={(e) => this.handleChange(e, \"startDate\")}\r\n                    className=\"form-control\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-sm-2 m-1 ml-5 \">End Date</div>\r\n                <div className=\"col-sm-4 m-1\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={endDate}\r\n                    onChange={(e) => this.handleChange(e, \"endDate\")}\r\n                    className=\"form-control\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <button\r\n                className=\"btn btn-primary ml-5\"\r\n                onClick={() =>\r\n                  this.postDataValues(this.props.data.id, startDate, endDate)\r\n                }\r\n              >\r\n                Submit\r\n              </button>\r\n            </div>\r\n          );\r\n        } else {\r\n          return (\r\n            <div className=\"pt-4 m-5 pb-5 mh-100 shadow-lg p-3 mb-4 bg-white rounded\">\r\n              <h2 className=\"ml-5\">Tracker Aggregation </h2>\r\n              <br></br>\r\n              <br></br>\r\n              <div className=\"row ml-5\">\r\n                <ReactBootstrap.Button onClick={() => this.importData()}>\r\n                  Import Data\r\n                </ReactBootstrap.Button>\r\n              </div>\r\n            </div>\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\nexport default DynamicComponent;\r\n","import React, { Component } from \"react\";\r\nimport DynamicComponent from \"../dynamicComponent/dynamicComponent\";\r\nimport { OrgUnitTree } from \"@hisp-amr/org-unit-tree\";\r\nimport { useDataQuery } from \"@dhis2/app-runtime\";\r\nconst onError = (error) => console.error(error);\r\n\r\nclass HomeComponet extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      orgUnit: \"\",\r\n    };\r\n    this.onSelect = this.onSelect.bind(this);\r\n  }\r\n\r\n  onSelect(selected) {\r\n    this.setState({ orgUnit: selected });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-auto col-md-auto col-sm-auto col-xs-auto shadow-lg bg-white rounded\">\r\n            <OrgUnitTree onSelect={this.onSelect} onError={onError} />\r\n          </div>\r\n          <div className=\"col-lg-7 col-md-7 col-sm-7 col-xs-7\">\r\n            <DynamicComponent data={this.state.orgUnit} />\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HomeComponet;\r\n","import React, { useState } from \"react\";\nimport \"./App.css\";\nimport i18n from \"@dhis2/d2-i18n\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport HomeComponet from \"./components/homeComponent/homeComponent\";\n\nconst MyApp = () => {\n  return <>\r\n      <HomeComponet />\r\n    </>;\n};\n\nexport default MyApp;"],"sourceRoot":""}